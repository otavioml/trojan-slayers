{% extends 'base.html' %}

{% block body %}
        <main>
            <main>
                <div class="container">
                    <div  class="form-group d-flex flex-fill justify-content-center">
                        <form class="form-livros mobile-wider" action="" method="POST" enctype="multipart/form-data">
                            <div class="input-wrapper">
                                <label for="title">Título</label>
                                <input type="text" name="title" id="title" placeholder="Digite aqui o título do livro a ser adicionado." required>
                            </div>
                            <div class="input-wrapper">
                                <label for="author">Autor</label>
                                <input type="text" name="author" id="author" placeholder="Insira aqui o nome do autor do livro." required>
                            </div>
                            <div class="input-wrapper">
                                <label for="gender">Gênero</label>
                                <input type="text" name="gender" id="gender" placeholder="Ex: Romance." required>
                            </div>
                            <div class="input-wrapper">
                                <label for="date">Ano de Publicação</label>
                                <input class="data-livros" type="text" name="date" id="date" placeholder="1991" required>
                            </div>
                            <div class="input-wrapper">
                                <label for="price">Preço</label>
                                <input type="text" name="price" id="price" placeholder="R$ 00,00." required>
                            </div>
                            <div class="textarea-branco">
                                <div class="input-wrapper upload-btn">
                                    <label for="foto-livro" style="margin-bottom: 0px;">Adicionar capa do livro</label>
                                    <input type="file" id="myfile" name="myfile" required>
                                </div>
                            </div>
                            <!-- DISPONÍVEL / REGISTRADO -->
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="available" name="available">
                                <label class="custom-control-label" for="available">Disponível em estoque?</label>
                            </div>
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customCheck2" name="linked">
                                <label class="custom-control-label" for="customCheck2">Registrar em sede?</label>
                            </div>
                            <!-- Lista de Sedes -->
                            <div id="lista-sedes">
                                {% for sede in sedes %}
                                <select id="select{{sede.id}}" class="custom-select {% if not sede == sedes[0]%}selectHidden{% endif %}" style="margin-bottom: 5px;">
                                    {% for sede in sedes %}
                                    <option value="{{sede.id}}">{{sede.name}}</option>
                                    {% endfor %}
                                </select>
                                {% endfor %}
                            </div>
                            <i onclick="addSelect()" class="fas fa-plus" id="addSede"></i>
                            <i onclick="delSelect()" class="fas fa-minus" id="delSede"></i>
                            <br>
                            <input class="btn-primary" type="submit" value="Adicionar novo livro"> 
                        </form>
                    </div>
                </div>
            </main>
        </main>
        <!-- FUNÇÃO PARA MOSTRAR O DROPDOWN DAS SEDES -->
        <script type="text/javascript">
            selectId = 2;
            storedId = 0;
            $(document).ready(function(){
                $("#customCheck2").click(function(){
                  $("#lista-sedes").toggle();
                  document.getElementById("addSede").style.display = "block";
                  
                });
              });
            function addSelect() {
                if (selectId == 2) {
                    document.getElementById("delSede").style.display = "block";
                }
                if (document.getElementById("select" + selectId) != null) {
                    document.getElementById("select" + selectId).style.display = "block";
                    selectId = selectId + 1;
                    if (document.getElementById("select" + selectId) == null) {
                        document.getElementById("addSede").style.display = "none";
                        storedId = selectId;
                    }
                    if(selectId > 2) {
                        document.getElementById("delSede").style.display = "block";
                    }
                }
            }
            function delSelect() {
                document.getElementById("select" + (selectId - 1)).style.display = "none";
                selectIdNext = selectId - 1;
                if (document.getElementById("select" + selectIdNext) != null) {
                    selectId = selectId - 1;
                }
                if(selectId <= 2) {
                    document.getElementById("delSede").style.display = "none";
                }
                if(document.getElementById("addSede").style.display != "block" && selectId < storedId) {
                    document.getElementById("addSede").style.display = "block";
                }
            }

        </script>

{% endblock %}